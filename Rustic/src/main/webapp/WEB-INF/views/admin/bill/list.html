<!DOCTYPE html>
<html lang="zxx" xmlns:th="http://www.thymeleaf.org">

<head>
<div th:replace="fragments/initAdmin :: head"></div>
</head>

<body>
	<!-- Sidenav -->
	<!-- Sidenav -->
	<div th:replace="fragments/navAdmin :: slide-bar"></div>
	<!-- Main content -->
	<div class="main-content" id="panel">
		<!-- Topnav -->
		<div th:replace="fragments/navAdmin :: top-nav"></div>
		<!-- Header -->
		<!-- Header -->

		<!-- Page content -->
		<div class="container-fluid mt--6"
			style="margin-top: 25px !important;">

			<!-- Dark table -->
			<div class="row">
				<div class="col">
					<div class="card bg-default shadow">
						<div class="card-header bg-transparent border-0">
							<h3 class="text-white mb-0" th:utext="#{lable.listproduct}"></h3>
							<hr class="my-4" />
							<div class="col-lg-12 col-5">
								<form role="form" th:action="@{/bill/list.html}" method="POST">
									<div class="row">
										<div class="input-daterange datepicker row align-items-center">
											<div class="col">
												<div class="form-group">
													<label class="text-white" th:utext="#{lable.sincedate}"></label>
													<div class="input-group">
														<div class="input-group-prepend">
															<span class="input-group-text"><i
																class="ni ni-calendar-grid-58"></i></span>
														</div>
														<input class="form-control" placeholder="Start date"
															type="text" value="06/18/2020" name="from_date"
															id="from_date" th:value="${from_date}">
													</div>
												</div>
											</div>
											<div class="col">
												<div class="form-group">
													<label class="text-white" th:utext="#{lable.todate}"></label>
													<div class="input-group">
														<div class="input-group-prepend">
															<span class="input-group-text"><i
																class="ni ni-calendar-grid-58"></i></span>
														</div>
														<input class="form-control" placeholder="End date"
															type="text" value="06/22/2020" name="to_date"
															id="to_date" th:value="${to_date}">
													</div>
												</div>
											</div>
										</div>
										<div class="col-lg-2">
											<label class="text-white">Trạng thái</label>
											<div>
												<select class=" form-control" name="status"
													th:value="${status}">
													<option value="0"
														th:attr="selected =${status}== '0' ? 'selected'">Tất
														cả</option>
													<option value="1"
														th:attr="selected =${status}== '1' ? 'selected'">Đã
														thanh toán</option>
													<option value="2"
														th:attr="selected =${status}== '2' ? 'selected'">Chưa
														thanh toán</option>
												</select>
											</div>
										</div>
										<div class="col-lg-2">
											<label class="text-white">Mã hóa đơn</label>
											<div>
												<input type="text" class="form-control" name="code"
													th:value="${code}" />
											</div>
										</div>
										<div class="col-sm-2">
											<label>&nbsp;</label>
											<div>
												<button type="submit" id="btnSearch" class="btn btn-primary"
													th:utext="#{lable.search}"></button>
											</div>
										</div>
									</div>
								</form>
							</div>
							<input type="hidden" name="category_list_ss"
								th:value="${category_list_ss}" />
							<hr class="my-4" />
							<div class="col-lg-12 col-5 text-right">
								<a th:href="@{/product/add.html}"
									sec:authorize="hasAnyAuthority('Administrators','Staffs')"
									class="btn btn-sm btn-primary" th:utext="#{lable.new}"></a> <a
									th:href="@{/category/list.html(category_list_ss=${category_list_ss})}"
									class="btn btn-sm btn-neutral" th:utext="#{lable.refresh}"></a>
							</div>
						</div>
						<div class="table-responsive">
							<table class="table align-items-center table-dark table-flush">
								<thead class="thead-dark">
									<tr>
										<th class="text-table-header">STT</th>
										<th class="text-table-header">Tên KH</th>
										<!--                                    <th class="text-table-header">Email</th>-->
										<th class="text-table-header">Mã hóa đơn</th>
										<th class="text-table-header">Thanh toán</th>
										<th class="text-table-header">Tổng tiền</th>
										<th class="text-table-header">Trạng thái TToán</th>
										<th class="text-table-header">Trạng thái HĐ</th>
										<th class="text-table-header text-center">#</th>
										<th class="text-table-header text-center">#</th>
										<th class="text-table-header text-center">#</th>
									</tr>
								</thead>
								<tbody class="list" th:if="${page} != null">
									<tr th:each="eachRow, iterStat : ${page}">
										<td class="text-table-body" th:text="${iterStat.count}"></td>
										<td class="text-table-body" th:text="${eachRow.name}"></td>
										<!--                                    <td class="text-table-body" th:text="${eachRow.email}"></td>-->
										<td class="text-table-body" th:text="${eachRow.code}"></td>
										<td class="text-table-body"><span
											th:if="${eachRow.payment == 0}">Thanh toán trực tiếp</span> <span
											th:if="${eachRow.payment == 1}">Thanh toán online</span></td>
										<td class="text-table-body"
											th:text="${#numbers.formatDecimal(eachRow.total, 0, 'COMMA', 0,'POINT')}"></td>
										<td class="text-table-body" style="text-align: center;">
											<button class="btn btn-success"
												th:if="${eachRow.status == 1}">Đã Thanh Toán</button>
											<button class="btn btn-warning"
												th:if="${eachRow.status == 2}">Chưa Thanh toán</button>
										</td>
										<td class="text-table-body" style="text-align: center;"
											th:switch="${eachRow.typeStatus}">
											<button class="btn btn-success" th:case="'0'">Đã
												nhận</button>
											<button class="btn btn-warning" th:case="'1'">Đã hủy</button>
											<button class="btn btn-error" th:case="'2'">Boom
												hàng</button>
											<button class="btn btn-success" th:case="'3'">Đang
												giao hàng</button>
											<button class="btn btn-success" th:case="'4'">Đang
												đóng gói</button>
											<button class="btn btn-success" th:case="'5'">Đang
												xác nhận</button>
										</td>
										<td class="text-table-body"><a
											th:onclick="'acceptPayment(\'' + ${eachRow.code} + '\',\'' + ${eachRow.id} + '\')'"
											data-toggle="tooltip" title="Xác nhận thanh toán"
											th:if="${eachRow.status == 2} and ${eachRow.typeStatus} != 1 and ${eachRow.typeStatus} != 2">
												<button class="btn btn-info btn-circle">
													<i class="fa fa-check"></i>
												</button>
										</a> <label th:if="${eachRow.status} == 1">&nbsp;</label></td>
										<td>
											<button type="button" class="btn btn-info btn-circle"
												th:onclick="'updateStatusType(\'' + ${eachRow.id} + '\')'"
												data-toggle="modal" data-target="#updateStatusPayment"
												title="Cập nhật trạng thái đơn hàng">
												<i class="fa fa-edit"></i>
											</button>
										</td>
										<td>
											<button type="button"
												th:onclick="'billDetail(\'' + ${eachRow.id} + '\')'"
												class="btn btn-default btn-circle" data-toggle="modal"
												data-target="#billModal" title="Hóa đơn chi tiết">
												<i class="fa fa-eye"></i>
											</button>
										</td>

									</tr>

								</tbody>
							</table>
						</div>
						<!-- Card footer -->
						<div class="card-footer py-4">
							<div
								th:replace="fragments/panigatorAdmin :: content(page = ${page})">
							</div>
						</div>
					</div>
				</div>
				<!-- Footer -->
				<!-- <div th:replace="fragments/navAdmin :: footer"></div> -->
			</div>
		</div>
	</div>
	<!-- Argon Scripts -->
	<!-- Core -->

	<!-- Optional JS -->
	<!-- 	<script th:src="@{/assets/vendor/chart.js/dist/Chart.min.js}"></script>
	<script th:src="@{/assets/vendor/chart.js/dist/Chart.extension.js}"></script> -->
	<!-- Argon JS -->
	<div th:replace="fragments/initAdmin :: commonScript"></div>






	<script th:inline="javascript">
		/*<![CDATA[*/
		var currUrl = /*[[@{/}]]*/"";
		/*]]>*/
	</script>


</body>

</html>